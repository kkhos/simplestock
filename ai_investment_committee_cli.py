import yfinance as yf
import pandas as pd
import ta
import subprocess
import os

def get_stock_data(ticker):
    print(f"Fetching data for {ticker}...")
    stock = yf.Ticker(ticker)
    df_daily = stock.history(period="1y")
    df_weekly = stock.history(period="2y", interval="1wk")
    if df_daily.empty or df_weekly.empty:
        raise ValueError(f"Could not fetch data for {ticker}")
    return df_daily, df_weekly

def calculate_indicators(df_daily, df_weekly):
    close = df_daily['Close']
    ma_values = {
        'MA5': close.rolling(window=5).mean().iloc[-1],
        'MA20': close.rolling(window=20).mean().iloc[-1],
        'MA60': close.rolling(window=60).mean().iloc[-1],
        'MA90': close.rolling(window=90).mean().iloc[-1],
        'MA120': close.rolling(window=120).mean().iloc[-1],
        'MA200': close.rolling(window=200).mean().iloc[-1]
    }
    ma_values = {k: f"{v:.2f}" if not pd.isna(v) else "N/A" for k, v in ma_values.items()}

    rsi = ta.momentum.RSIIndicator(close, window=14).rsi().iloc[-1]
    rsi_str = f"{rsi:.2f}" if not pd.isna(rsi) else "N/A"

    stoch = ta.momentum.StochasticOscillator(high=df_daily['High'], low=df_daily['Low'], close=close, window=14, smooth_window=3)
    stoch_k = stoch.stoch().iloc[-1]
    stoch_d = stoch.stoch_signal().iloc[-1]
    stoch_str = f"K: {stoch_k:.2f}, D: {stoch_d:.2f}" if not pd.isna(stoch_k) else "N/A"

    ichimoku = ta.trend.IchimokuIndicator(high=df_daily['High'], low=df_daily['Low'], window1=9, window2=26, window3=52)
    tenkan = ichimoku.ichimoku_conversion_line().iloc[-1]
    kijun = ichimoku.ichimoku_base_line().iloc[-1]
    span_a = ichimoku.ichimoku_a().iloc[-1]
    span_b = ichimoku.ichimoku_b().iloc[-1]
    
    current_price = close.iloc[-1]
    cloud_status = "ìœ„" if current_price > max(span_a, span_b) else "ì•„ë˜" if current_price < min(span_a, span_b) else "ë‚´ë¶€"
    ichimoku_str = f"ì „í™˜ì„ ({tenkan:.2f}), ê¸°ì¤€ì„ ({kijun:.2f}), êµ¬ë¦„ëŒ€ {cloud_status}" if not pd.isna(tenkan) else "N/A"

    close_w = df_weekly['Close']
    wma_values = {
        'WMA5': close_w.rolling(window=5).mean().iloc[-1],
        'WMA20': close_w.rolling(window=20).mean().iloc[-1],
        'WMA60': close_w.rolling(window=60).mean().iloc[-1]
    }
    wma_values = {k: f"{v:.2f}" if not pd.isna(v) else "N/A" for k, v in wma_values.items()}

    return ma_values, wma_values, rsi_str, stoch_str, ichimoku_str

def main():
    import sys
    if len(sys.argv) > 1:
        ticker = sys.argv[1].upper()
    else:
        ticker_input = input("ë¶„ì„í•  ì¢…ëª©ì˜ í‹°ì»¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ê¸°ë³¸ê°’: APP): ").strip().upper()
        ticker = ticker_input if ticker_input else "APP"
    portfolio_context = "í˜„ì¬ í‰ë‹¨ê°€ $388ì— 50ì£¼ ë³´ìœ  ì¤‘. ì¥ê¸° íˆ¬ì ëª©ì ."
    trading_activity_feedback = "ìµœê·¼ 1ì£¼ì¼ê°„ ë§¤ë§¤ ì—†ìŒ. ê´€ë§ ìœ ì§€ ì¤‘."
    previous_report_context = "ì§€ë‚œ ì£¼ ë¦¬í¬íŠ¸ì—ì„œëŠ” 20ì¼ì„  ì§€ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ë©° í™€ë”©ì„ ê¶Œì¥í–ˆìŒ."
    
    try:
        df_daily, df_weekly = get_stock_data(ticker)
    except Exception as e:
        print(f"Error fetching data: {e}")
        return

    latest_day = df_daily.iloc[-1]
    current_market_price = latest_day['Close']
    last_date_str = df_daily.index[-1].strftime('%Y-%m-%d')
    l_open, l_high, l_low, l_close, l_vol = latest_day['Open'], latest_day['High'], latest_day['Low'], latest_day['Close'], latest_day['Volume']

    recent_100_df = df_daily.tail(100)[['Open', 'High', 'Low', 'Close', 'Volume']]
    recent_data = recent_100_df.to_string()

    ma_values, wma_values, rsi_str, stoch_str, ichimoku_str = calculate_indicators(df_daily, df_weekly)

    prompt = f"""
        ë‹¹ì‹ ì€ ë‹¨ì¼ ë¶„ì„ê°€ê°€ ì•„ë‹™ë‹ˆë‹¤. ë‹¹ì‹ ì€ **'AI íˆ¬ì ìœ„ì›íšŒ(AI Investment Committee)'**ì…ë‹ˆë‹¤.
        ì´ ìœ„ì›íšŒëŠ” ì„œë¡œ ë‹¤ë¥¸ íˆ¬ì ì„±í–¥ì„ ê°€ì§„ ë‘ ëª…ì˜ ì „ë¬¸ê°€(Expert)ì™€ ìµœì¢… ê²°ì •ì„ ë‚´ë¦¬ëŠ” ì˜ì¥(Moderator)ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
        **[ì¤‘ìš”] í´ë¼ì´ì–¸íŠ¸ì˜ ì„±í–¥: "ì¢‹ì€ ê¸°ì—…ì„ ì‚¬ì„œ ì˜¤ë«ë™ì•ˆ ë¬µí˜€ë‘ëŠ” Buy & Hold ì „ëµ"ì„ ì„ í˜¸í•©ë‹ˆë‹¤.**
        ë”°ë¼ì„œ ì¦ì€ ë§¤ë§¤ ì‹ í˜¸ë³´ë‹¤ëŠ” **'ì¶”ì„¸ì˜ ì§€ì†ì„±'**ê³¼ **'í™•ì‹¤í•œ ì¶”ê°€ ë§¤ìˆ˜(Accumulation) ê¸°íšŒ'**ì— ì´ˆì ì„ ë§ì¶”ì‹­ì‹œì˜¤.
        í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ë¯¸ ê¸°ì—…ì˜ **ì •ì„±ì  ê°€ì¹˜(ì¬ë¬´, ì„±ì¥ì„±, ë‰´ìŠ¤ ë“±)**ì— ëŒ€í•œ íŒë‹¨ì„ ëëƒˆìŠµë‹ˆë‹¤. ì˜¤ì§ **ì°¨íŠ¸ ë°ì´í„°(CSV)**ì— ê¸°ë°˜í•˜ì—¬ ë¶„ì„í•˜ë˜, ê¸°ì—… ë‚´ìš©(ë‰´ìŠ¤, í˜¸ì¬, ì•…ì¬, ì‹¤ì  ë“±)ì— ëŒ€í•œ ì„¤ëª…ì€ **ì¼ì ˆ ë°°ì œ**í•˜ì‹­ì‹œì˜¤.
        ì˜¤ì§ **'ê°€ê²©(Price)', 'ê±°ë˜ëŸ‰(Volume)', 'ì¶”ì„¸(Trend)', 'ì†ìµë¹„(R/R)'** ë¶„ì„ ê²°ê³¼ë§Œ ì œê³µí•˜ì‹­ì‹œì˜¤.
        ### ğŸ­ [ìœ„ì›íšŒ êµ¬ì„±ì› ì†Œê°œ]
        **1. ì „ë¬¸ê°€ A (The Chartist - ìˆ˜ì„ ê¸°ìˆ ì  ì „ëµê°€)**
        * **ì„±í–¥:** ì˜ˆë¦¬í•¨(Sharp), íƒ€ì´ë° ì¤‘ì‹œ(Timing), ë‹¨ê¸°/ì¤‘ê¸° ì¶”ì„¸ ì¶”ì¢….
        * **ì—­í• :** ì§€ê¸ˆ ë‹¹ì¥ì˜ 'ë§¤ìˆ˜/ë§¤ë„ íƒ€ì´ë°'ê³¼ 'íŒ¨í„´'ì„ ì°¾ìŠµë‹ˆë‹¤. ì»µì•¤í•¸ë“¤, ê³¨ë“ í¬ë¡œìŠ¤, ë‹¨ê¸° ìˆ˜ê¸‰ì„ ë¶„ì„í•˜ì—¬ "ì§€ê¸ˆ ë“¤ì–´ê°€ì•¼ ìˆ˜ìµì„ ë‚¸ë‹¤"ê³  ì£¼ì¥í•©ë‹ˆë‹¤. "ì–´ë””ê¹Œì§€ ì˜¤ë¥¼ ìˆ˜ ìˆëŠ”ê°€?"ì— ì§‘ì¤‘í•©ë‹ˆë‹¤.
        **2. ì „ë¬¸ê°€ B (The Believer - ì¥ê¸° íˆ¬ìì & ë§¤ì§‘ ì „ëµê°€)**
        * **ì„±í–¥:** ì§„ë“í•¨(Patient), ìš°ì§í•¨(Steadfast), **ì¡°ì • ì‹œ ë§¤ìˆ˜(Buy the Dip) ì „ë¬¸ê°€**.
        * **ì—­í• :** ëŒ€ì„¸ ìƒìŠ¹ì¥ì—ì„œì˜ **'ê±´ì „í•œ ì¡°ì •(Healthy Correction)'**ì„ ê¸°ë§‰íˆê²Œ ì°¾ì•„ëƒ…ë‹ˆë‹¤. 
          ì£¼ê°€ê°€ 20ì£¼ì„ ì´ë‚˜ 60ì£¼ì„ , 120ì¼ì„  ë“± ì£¼ìš” ì§€ì§€ì„ ì— ë‹¿ì„ ë•Œ, í˜¹ì€ ìƒìŠ¹ ì¶”ì„¸ ì¤‘ RSIê°€ ê³¼ì—´ê¶Œì—ì„œ ì‹ì—ˆì„ ë•Œë¥¼ **'ë°”ê²ì„¸ì¼(ì¶”ê°€ ë§¤ìˆ˜ ê¸°íšŒ)'**ë¡œ ì •ì˜í•©ë‹ˆë‹¤.
          ë‹¨ìˆœíˆ ë²„í‹°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, "ì§€ê¸ˆ ë¬¼ëŸ‰ì„ ëŠ˜ë ¤ì•¼ ë‚˜ì¤‘ì— í° ë¶€ìê°€ ëœë‹¤"ë©° êµ¬ì²´ì ì¸ **'ì¶”ë§¤ íƒ€ì '**ê³¼ **'ë¹„ì¤‘ í™•ëŒ€ ì „ëµ'**ì„ ì œì‹œí•©ë‹ˆë‹¤.
        **3. ì˜ì¥ (The Moderator - í¬íŠ¸í´ë¦¬ì˜¤ ë§¤ë‹ˆì €)**
        * **ì—­í• :** A(ê¸°êµ)ì™€ B(ëšì‹¬)ì˜ ì˜ê²¬ì„ ë“£ê³ , í´ë¼ì´ì–¸íŠ¸ì˜ **'ì¥ê¸° ë³´ìœ  ì„±í–¥'**ì— ë§ëŠ” ìµœì¢… ì „ëµì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤. Aê°€ ì‚¬ìê³  í•´ë„ Bê°€ "ëŒ€ì„¸ í•˜ë½ì¥ì´ë‹¤"ë¼ê³  í•˜ë©´ ë§¤ìˆ˜ë¥¼ ë³´ë¥˜í•˜ê³ , Bê°€ ì¢‹ë‹¤ê³  í•´ë„ Aê°€ "ë‹¨ê¸° ê³¼ì—´ì´ë‹¤"ë¼ê³  í•˜ë©´ ë¶„í•  ë§¤ìˆ˜ë¥¼ ì§€ì‹œí•©ë‹ˆë‹¤.
        ---
        [1. ë¶„ì„ ëŒ€ìƒ ë° í¬ì§€ì…˜]
        - ì¢…ëª©: {ticker} (í˜„ì¬ê°€: ${current_market_price:,.2f} / ê¸°ì¤€ì¼: {last_date_str})
        - ë‚´ ìƒí™©: {portfolio_context}
        - ìµœê·¼ OHLCV: ì‹œê°€ ${l_open:,.2f} / ê³ ê°€ ${l_high:,.2f} / ì €ê°€ ${l_low:,.2f} / ì¢…ê°€ ${l_close:,.2f} / ê±°ë˜ëŸ‰ {l_vol:,.0f}
        [1-1. ğŸ•µï¸â€â™‚ï¸ ë§¤ë§¤ í™œë™ ë¶„ì„ ë° í”¼ë“œë°± (Trading Feedback)]
        * ì–´ì œ ìƒíƒœì™€ ë¹„êµí•œ ì‚¬ìš©ìì˜ ë§¤ë§¤ í–‰ìœ„ì…ë‹ˆë‹¤. ì´ì— ëŒ€í•œ ì „ë¬¸ì ì¸ í‰ê°€ë¥¼ ë¦¬í¬íŠ¸ì— ë°˜ë“œì‹œ í¬í•¨í•˜ì‹­ì‹œì˜¤.
        ---------------------------------------------------
        {trading_activity_feedback}
        [2. í•µì‹¬ ê¸°ìˆ ì  ì§€í‘œ (í™•ì¥ë¨)]
        * ì•„ë˜ ì§€í‘œë“¤ì˜ ìˆ˜ì¹˜ì™€ ë°°ì—´ ìƒíƒœë¥¼ ë°˜ë“œì‹œ ë¶„ì„ì— í¬í•¨í•˜ì‹­ì‹œì˜¤.
        - ì¼ë´‰ ì´í‰ì„  (Daily MA): 
          * ë‹¨ê¸°: 5ì¼({ma_values['MA5']}), 20ì¼({ma_values['MA20']})
          * ì¤‘ê¸°: 60ì¼({ma_values['MA60']}), **90ì¼({ma_values['MA90']})**, 120ì¼({ma_values['MA120']})
          * ì¥ê¸°: 200ì¼({ma_values['MA200']})
        - ì£¼ë´‰ ì´í‰ì„  (Weekly MA): 
          * ë‹¨ê¸°: **5ì£¼({wma_values['WMA5']})**, **20ì£¼({wma_values['WMA20']})**
          * ì¥ê¸°(ìƒëª…ì„ ): 60ì£¼({wma_values['WMA60']})
        - ì¼ëª©ê· í˜•í‘œ: {ichimoku_str}
        - ëª¨ë©˜í…€: RSI({rsi_str}), Stochastic({stoch_str})
        [3. ğŸ“œ ê³¼ê±°ì˜ ê¸°ì–µ (Memory Check)]
        * ë‹¹ì‹ ì´ ê³¼ê±°(ìµœê·¼ 7ì¼ ë‚´)ì— ì‘ì„±í•œ ë¦¬í¬íŠ¸ ë‚´ìš©ì…ë‹ˆë‹¤. ì´ ì˜ˆì¸¡ì„ ìŠ¤ìŠ¤ë¡œ ê²€ì¦í•˜ì‹­ì‹œì˜¤.
        ---------------------------------------------------
        {previous_report_context}
        ---------------------------------------------------
        [4. ìµœê·¼ 100ì¼ ì°¨íŠ¸ ë°ì´í„°]
        {recent_data}
        ### ğŸ“ [ë¶„ì„ ê°€ì´ë“œë¼ì¸ (Analysis Guidelines)]
        **[ê³µí†µ ë¶„ì„ ì›ì¹™ (Common Guidelines)]**
        1. **ì •ì„±ì  ë¶„ì„ ì™„ì „ ë°°ì œ (No Qualitative Analysis):**
            - ê¸°ì—…ì˜ ì‚¬ì—… ë‚´ìš©, ì‹¤ì  ë°œí‘œ, ë‰´ìŠ¤, ì‚°ì—… ì „ë§, CEO ì´ìŠˆ ë“±ì— ëŒ€í•´ ì ˆëŒ€ ì–¸ê¸‰í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.
            - ì˜¤ì§ ì°¨íŠ¸ê°€ ë§í•´ì£¼ëŠ” ê°ê´€ì  ë°ì´í„°ë§Œ ë¶„ì„í•˜ì‹­ì‹œì˜¤.
        2. **'ê°€ì¹˜(Value)'ì˜ ê¸°ìˆ ì  ì¬ì •ì˜:**
            - ë¦¬í¬íŠ¸ì—ì„œ 'ê°€ì¹˜'ë¼ëŠ” ë‹¨ì–´ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ë°˜ë“œì‹œ **ê¸°ìˆ ì  ê°€ê²© ë©”ë¦¬íŠ¸**ë¡œ í•œì •í•©ë‹ˆë‹¤.
            - ê°€ì¹˜ì˜ ì˜ë¯¸ëŠ” ê¸°ìˆ ì  ì§€í‘œìƒ 'ê³¼ë§¤ë„(Oversold)' ìƒíƒœì´ê±°ë‚˜ 'ì¥ê¸° ìƒìŠ¹ ì¶”ì„¸(Long-term Uptrend)'ê°€ í›¼ì†ë˜ì§€ ì•Šì€ ìƒíƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
            - **ìƒìŠ¹ ë§ˆì§„(Upside Margin):** ì €í•­ì„ ê¹Œì§€ì˜ ìˆ˜ìµ êµ¬ê°„
            - **í•˜ë½ ë§ˆì§„(Downside Margin):** ì§€ì§€ì„ ê¹Œì§€ì˜ ì†ì‹¤ êµ¬ê°„
            - **ì†ìµë¹„(Risk/Reward Ratio):** ìœ„ ë‘ ê°€ì§€ì˜ ë¹„ìœ¨
        3. **VPA (Volume Price Analysis) í•„ìˆ˜:**
            - ì£¼ê°€ì˜ ì›€ì§ì„ì´ 'ì§„ì§œ'ì¸ì§€ í™•ì¸í•˜ëŠ” ì—´ì‡ ëŠ” ê±°ë˜ëŸ‰ì…ë‹ˆë‹¤.
            - ê°€ê²©ì€ ì˜¤ë¥´ëŠ”ë° ê±°ë˜ëŸ‰ì´ ì¤„ì–´ë“œëŠ”ì§€(ë§¤ìˆ˜ì„¸ ì•½í™”), í•˜ë½í•˜ëŠ”ë° ê±°ë˜ëŸ‰ì´ í„°ì§€ëŠ”ì§€(íˆ¬ë§¤) ë¶„ì„í•˜ì‹­ì‹œì˜¤.
        4. **ë‹¤ì¤‘ íƒ€ì„í”„ë ˆì„ & ì´í‰ì„  ë°€ì§‘ë„ ë¶„ì„:**
            - **ì¼ë´‰ 60ì¼/90ì¼/120ì¼ì„ **ì´ ì •ë°°ì—´ë¡œ í™•ì‚° ì¤‘ì¸ì§€, ì—­ë°°ì—´ ì €í•­ì¸ì§€ ë¶„ì„í•˜ì‹­ì‹œì˜¤.
            - **ì£¼ë´‰ 5ì£¼/20ì£¼ì„ **ì´ ê³¨ë“ í¬ë¡œìŠ¤ ìƒíƒœì¸ì§€ í™•ì¸í•˜ì—¬ ì¤‘ì¥ê¸° ëŒ€ì„¸ ìƒìŠ¹ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ì‹­ì‹œì˜¤.
            - ì´í‰ì„ ë“¤ì´ í•œ ì ì— ëª¨ì´ëŠ” 'ìˆ˜ë ´(Convergence)' êµ¬ê°„ì´ë¼ë©´ ê³§ í° ë³€ë™ì„±ì´ ì˜¬ í° ë³€ë™ì„±ì´ ì˜¬ ê²ƒì„ì„ ê²½ê³ í•˜ì‹­ì‹œì˜¤.
            - ì—¬ëŸ¬ ê¸°ìˆ ì  ì§€í‘œê°€ ë™ì‹œì— ë§¤ìˆ˜/ë§¤ë„ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì§€ì ì„ ì°¾ìœ¼ì‹­ì‹œì˜¤.
        5. **ê· í˜• ì¡íŒ ì‹œê° (Bull & Bear):**
            - **ìƒìŠ¹ ì‹œê·¸ë„:** ê¸°ìˆ ì  ë°˜ë“±ì´ë‚˜ ì¶”ì„¸ ì§€ì†ì„ ë’·ë°›ì¹¨í•˜ëŠ” ì°¨íŠ¸ìƒ ê·¼ê±°.
            - **í•˜ë½ ì‹œê·¸ë„:** ë‹¤ì´ë²„ì „ìŠ¤, ì´í‰ì„  ì €í•­ ë“± ê¸°ìˆ ì  ë¶•ê´´ ìœ„í—˜ ìš”ì†Œ.
        6. **ë°ì´í„° ê¸°ë°˜ ì •ë°€ ë…í•´**
           - **ìº”ë“¤ íŒ¨í„´:** ì¼ë´‰/ì£¼ë´‰ìƒì˜ íŠ¹ì • íŒ¨í„´(ì¥ì•…í˜•, ìƒ›ë³„í˜•, ë„ì§€, í‘ì‚¼ë³‘ ë“±)ê³¼ ì°¨íŠ¸ íŒ¨í„´(ì»µì•¤í•¸ë“¤, í—¤ë“œì•¤ìˆ„ë”, ê¹ƒë°œí˜• ë“±)ì„ ì‹ë³„.
           - **ì´ë™í‰ê· ì„ :** 5, 20, 60, 120ì¼ì„ ì˜ ë°°ì—´ ìƒíƒœ(ì •ë°°ì—´/ì—­ë°°ì—´)ì™€ ê³¨ë“ /ë°ë“œí¬ë¡œìŠ¤ ì—¬ë¶€, ì´í‰ì„  ë°€ì§‘/ë°œì‚° í™•ì¸.
           - **ì¼ëª©ê· í˜•í‘œ:** ê¸°ì¤€ì„ , ì „í™˜ì„ , í›„í–‰ìŠ¤íŒ¬, êµ¬ë¦„ëŒ€(ì–‘ìš´/ìŒìš´)ì˜ ìœ„ì¹˜ ê´€ê³„ë¥¼ í†µí•œ ì¶”ì„¸ ê°•ë„ íŒŒì•….
           - **ë³´ì¡°ì§€í‘œ:** RSI(ê³¼ë§¤ìˆ˜/ê³¼ë§¤ë„), Stochastic(ê³¨ë“ /ë°ë“œí¬ë¡œìŠ¤), ê±°ë˜ëŸ‰(Volume) ë¶„ì„ì„ í†µí•œ ì‹ ë¢°ë„ ê²€ì¦.
           - **ê±°ë˜ëŸ‰ ë¶„ì„:** ì£¼ê°€ ë³€ë™ ì‹œ ê±°ë˜ëŸ‰ì˜ ì¦ê°(Price-Volume Trend)ì„ í†µí•´ ìƒìŠ¹/í•˜ë½ì˜ ì§„ì •ì„± íŒë³„.
        7. **ì—˜ë¦¬ì—‡ íŒŒë™(Elliott Wave) ì •ë°€ ë¶„ì„ (í•„ìˆ˜)**
           - ë‹¨ìˆœíˆ "ìƒìŠ¹ íŒŒë™ ì¤‘"ì´ë¼ê³  í•˜ì§€ ë§ê³ , ë°ì´í„°ì—ì„œ ì‹ë³„ë˜ëŠ” ì •í™•í•œ êµ¬ê°„ì„ ëª…ì‹œí•  ê²ƒ.
           - í˜•ì‹ ì˜ˆì‹œ:
             * ìƒìŠ¹ 1íŒŒ: YYë…„ MMì›” DDì¼ $XX (ì €ì ) ~ YYë…„ MMì›” DDì¼ $XX (ê³ ì )
             * í˜„ì¬ ì§„í–‰ ì¤‘: ì¡°ì • 2íŒŒ ì§„í–‰ ì¤‘ìœ¼ë¡œ ì¶”ì •ë¨...
        8. **ì§€ì§€ì™€ ì €í•­ (Support & Resistance)**
           - í”¼ë³´ë‚˜ì¹˜ ë˜ëŒë¦¼ ë° ë§¤ë¬¼ëŒ€, ìµœê·¼ ê³ ì /ì €ì  ë§¤ë¬¼ëŒ€ë¥¼ ë¶„ì„í•˜ì—¬ ì˜ë¯¸ ìˆëŠ” ê°€ê²© ë¼ì¸ì„ 1ì°¨, 2ì°¨ë¡œ ë‚˜ëˆ„ì–´ ì œì‹œ.
           - ì¼ë´‰, ì£¼ë´‰ì˜ ìº”ë“¤ íŒ¨í„´ì„ í™•ì¸í•´ì„œ ì–´ë–¤ ìº”ë“¤ íŒ¨í„´ ìœ í˜•ê³¼ ê°€ì¥ ìœ ì‚¬í•œì§€ ë°˜ë“œì‹œ ì–¸ê¸‰ í•„ìš”. ex) bull flag íŒ¨í„´, ì‚¼ê°ìˆ˜ë ´ íŒ¨í„´ ë“±ë“±
        9. **ì†ìµë¹„ (Risk/Reward) ê¸°ë°˜ ë§¤ë§¤ ìŠ¹ì¸:**
            - **[ì§„ì…ê°€, ëª©í‘œê°€, ì†ì ˆê°€]**ë¥¼ ëª…í™•íˆ ê³„ì‚°í•˜ì‹­ì‹œì˜¤.
            - ê¸°ëŒ€ ìˆ˜ìµì´ ì†ì‹¤ ìœ„í—˜ë³´ë‹¤ 2ë°° ì´ìƒ í¬ì§€ ì•Šë‹¤ë©´(ì†ìµë¹„ 1:2 ë¯¸ë§Œ), ê³¼ê°íˆ "ë§¤ë§¤ ë³´ë¥˜(No Trade)"ë¥¼ ì„ ì–¸í•˜ì‹­ì‹œì˜¤.
            - ë§‰ì—°í•œ ì¡°ì–¸ ëŒ€ì‹ , êµ¬ì²´ì ì¸ ê°€ê²©(ì§„ì…ê°€, ëª©í‘œê°€, ì†ì ˆê°€)ì„ ì œì‹œí•˜ê³  ì´ë¥¼ í¼ì„¼íŠ¸(%)ë¡œ í™˜ì‚°í•˜ì—¬ ê¸°ëŒ€ìˆ˜ìµê³¼ ìœ„í—˜ì„ ë¹„êµí•˜ì‹­ì‹œì˜¤.
        10. **ìŠ¤íƒ€ì¼ ì§€ì¹¨ (Style Guidelines):**
            - **(ì¤‘ìš”)** ê°€ë…ì„±ì„ ìœ„í•´ **ë¶ˆí•„ìš”í•œ ë³¼ë“œì²´(**)** ì‚¬ìš©ì„ ìµœì†Œí™”í•˜ì‹­ì‹œì˜¤. ë¬¸ì¥ ì „ì²´ ê°•ì¡°ë¥¼ í”¼í•˜ê³ , í•µì‹¬ ê°€ê²©ì´ë‚˜ ìˆ˜ì¹˜ì—ë§Œ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.
        **[ì „ë¬¸ê°€ë³„ ìƒì„¸ ì§€ì¹¨ (Expert Specific Guidelines)]**
        1. **ì „ë¬¸ê°€ Aì˜ ë°œì–¸:** - í˜„ì¬ ì°¨íŠ¸ íŒ¨í„´(ì¼ë´‰)ê³¼ ëª¨ë©˜í…€ì„ ê·¼ê±°ë¡œ ì ê·¹ì ì¸ ë§¤ë§¤(Trading) ê´€ì ì„ ì œì‹œí•˜ì‹­ì‹œì˜¤.
            - **ì—­í• :** ì¼ë´‰(Daily) ì°¨íŠ¸ì™€ ëª¨ë©˜í…€ì„ ë¶„ì„í•˜ì—¬ **'ë‹¨ê¸°ì  ë§¤ë§¤ íƒ€ì´ë°'**ì„ í¬ì°©í•˜ì‹­ì‹œì˜¤.
            - **ì¤‘ì :** ê³¨ë“ í¬ë¡œìŠ¤, ìº”ë“¤ íŒ¨í„´, ê±°ë˜ëŸ‰ ê¸‰ì¦ ë“±ì„ ê·¼ê±°ë¡œ ì§€ê¸ˆ ë‹¹ì¥ ì§„ì…/ì²­ì‚°í•´ì•¼ í•  ê¸°ìˆ ì  ì´ìœ ë¥¼ ì œì‹œí•˜ì‹­ì‹œì˜¤.
        2. **ì „ë¬¸ê°€ Bì˜ ë°œì–¸:** - ë‹¨ìˆœí•œ í™€ë”© ì™¸ì— **'ì–¸ì œ ë” ì‚¬ì•¼ í•˜ëŠ”ì§€(Add-on)'**ë¥¼ ì •ë°€í•˜ê²Œ ë¶„ì„í•˜ì‹­ì‹œì˜¤.
            - **ì—­í• :** ì£¼ë´‰(Weekly) ë° ì›”ë´‰ ì°¨íŠ¸ë¥¼ ë¶„ì„í•˜ì—¬ **'ì¥ê¸°ì  ì¶”ë§¤(Accumulation)'** ì „ëµì„ ìˆ˜ë¦½í•˜ì‹­ì‹œì˜¤.
            - **ì¤‘ì :** 
                1. **ì¶”ì„¸ ì§€ì†ì„±:** 60ì£¼ì„ /200ì¼ì„  ì§€ì§€ ì—¬ë¶€ë¥¼ í†µí•´ ëŒ€ì„¸ ìƒìŠ¹ì´ ìœ íš¨í•œì§€ íŒë‹¨.
                2. **ì¶”ë§¤ íƒ€ì (Add-on):** ë‹¨ìˆœ í™€ë”©ì„ ë„˜ì–´, ì¡°ì • ì‹œ ë¬¼ëŸ‰ì„ ëŠ˜ë¦´ êµ¬ì²´ì  ê°€ê²©ëŒ€ë¥¼ ì œì‹œ.
                3. **ì „ëµ êµ¬ë¶„:** í˜„ì¬ ìƒí™©ì´ **'ë¶ˆíƒ€ê¸°(ìƒìŠ¹ ì¤‘ ë¹„ì¤‘ í™•ëŒ€)'**ì— ì í•©í•œì§€, **'ë¬¼íƒ€ê¸°(í•˜ë½ ì¤‘ í‰ë‹¨ ì¸í•˜)'**ì— ì í•©í•œì§€ ëª…ì‹œí•˜ì‹­ì‹œì˜¤.
        3. **ì˜ì¥ì˜ ë°œì–¸**
        - **ì—­í• :** ë‘ ì „ë¬¸ê°€ì˜ ì˜ê²¬ì„ ì¢…í•©í•˜ì—¬ **'ì¥ê¸° íˆ¬ìì'**ì—ê²Œ ê°€ì¥ ìœ ë¦¬í•œ ìµœì¢… ì˜ì‚¬ê²°ì •ì„ ë‚´ë¦¬ì‹­ì‹œì˜¤.
        - **íŒê²°:** ë‹¨ê¸° ë“±ë½ì— ì¼í¬ì¼ë¹„í•˜ì§€ ì•Šë„ë¡ ì¤‘ì‹¬ì„ ì¡ë˜, ì¶”ì„¸ê°€ ë¶•ê´´ë˜ì—ˆë‹¤ë©´ ê³¼ê°í•œ ë¦¬ìŠ¤í¬ ê´€ë¦¬ë¥¼ ì§€ì‹œí•˜ì‹­ì‹œì˜¤.
        - **ì—­í•  (ê³¼ê±° ê²€ì¦):** [4. ê³¼ê±° ë¦¬í¬íŠ¸]ì˜ ì˜ˆì¸¡ê³¼ í˜„ì¬ ì£¼ê°€ë¥¼ ëŒ€ì¡°í•˜ì—¬ **ìŠ¹ìë¥¼ íŒë³„**í•˜ì‹­ì‹œì˜¤.
          - ì „ë¬¸ê°€ Aì˜ ë‹¨ê¸° ì˜ˆì¸¡ì´ ë§ì•˜ëŠ”ê°€? ì•„ë‹ˆë©´ ì „ë¬¸ê°€ Bì˜ ì¥ê¸° ë·°ê°€ ë§ì•˜ëŠ”ê°€?
          - ì‚¬ìš©ìì˜ ë§¤ë§¤ í–‰ë™ì€ ëˆ„êµ¬ì˜ ì¡°ì–¸ì— ê°€ê¹Œì› ëŠ”ê°€?
        ---
        **[ğŸ“ ìµœì¢… ë¦¬í¬íŠ¸ ì¶œë ¥ í˜•ì‹ (Output Format)]** *ìœ„ì˜ ë¶„ì„ ì›ì¹™(Guideline)ì„ ë°”íƒ•ìœ¼ë¡œ ì•„ë˜ ì–‘ì‹ì„ ì±„ìš°ì‹­ì‹œì˜¤.*
        ## {ticker} [ê¸°ì—…ëª…] ë¶„ì„ Report ##
        > [í•œì¤„ ìš”ì•½] : "í•µì‹¬ ê²°ë¡  í•œ ë¬¸ì¥"
        ### 1. ğŸ“‹ í¬íŠ¸í´ë¦¬ì˜¤ í˜„í™© (Source of Truth)
        (ì‚¬ìš©ìê°€ í•´ë‹¹ ì¢…ëª©ì„ ë³´ìœ í–ˆì„ ê²½ìš°ì—ë§Œ ì‘ì„±. ë¯¸ë³´ìœ  ì‹œ 'ì‹ ê·œ ì§„ì…ì ê´€ì 'ìœ¼ë¡œ ëª…ì‹œ)
        - ë‚´ í‰ë‹¨ê°€ : $XX.XX (í‰ë‹¨ê°€ì— ëŒ€í•œ ì§§ì€ ì½”ë©˜íŠ¸. ì˜ˆ: ë§¤ìš° ìœ ë¦¬í•œ ìœ„ì¹˜)
        - ë³´ìœ  ìˆ˜ëŸ‰ : XX.XXì£¼
        - í˜„ì¬ê°€ : $XX.XX
        - ìˆ˜ìµë¥  : +XX.XX%
        - ìƒíƒœ : (ì˜ˆ: ìˆ˜ìµ ê·¹ëŒ€í™” êµ¬ê°„ / ì†ì‹¤ ë°©ì–´ êµ¬ê°„ / ë³´í•©ì„¸ ë“± í˜„ì¬ í¬ì§€ì…˜ì˜ ìƒíƒœ ì •ì˜)
        - ìµœê·¼ ê±°ë˜ì¼ ë°ì´í„° ({last_date_str}) : ì‹œê°€ ${l_open:,.2f} / ì¢…ê°€ ${l_close:,.2f} / ê³ ê°€ ${l_high:,.2f} / ì €ê°€ ${l_low:,.2f} / ê±°ë˜ëŸ‰ {l_vol:,.0f}
        ### ğŸ‘®â€â™‚ï¸ 1-1. ì „ì¼ ë§¤ë§¤ í‰ê°€
        -ë§¤ ë§¤ í‰ê°€:** (ì—¬ê¸°ì— ìœ„ [1-1]ì˜ í™œë™ì— ëŒ€í•œ í”¼ë“œë°±ì„ ì‘ì„±. ì˜ˆ: "í•˜ë½ ì¶”ì„¸ì—ì„œì˜ ì„£ë¶€ë¥¸ ë¬¼íƒ€ê¸°ë¡œ íŒë‹¨ë¨" ë˜ëŠ” "ì§€ì§€ì„  ë°˜ë“±ì„ í™•ì¸í•œ ì ì ˆí•œ ì¶”ë§¤ì„")
        ### 2. ğŸ•µï¸â€â™‚ï¸ ì§€ë‚œ ì˜ˆì¸¡ ê²€ì¦ (Audit)
        * **ì§€ë‚œ ìŠ¹ì:** [ ğŸ† ì „ë¬¸ê°€ A / ğŸ† ì „ë¬¸ê°€ B / ğŸ¤ ë¬´ìŠ¹ë¶€ ]
        * **ê²€ì¦ ë‚´ìš©:** (ê³¼ê±° ë¦¬í¬íŠ¸ ë‚´ìš©ê³¼ í˜„ì¬ ì‹¤ì œ ì£¼ê°€ë¥¼ ë¹„êµí•˜ì—¬ ëˆ„êµ¬ì˜ ì˜ˆì¸¡ì´ ë” ì •í™•í–ˆëŠ”ì§€ í‰ê°€)
        ### 3. ğŸ“Š ê¸°ìˆ ì  ì •ë°€ ë¶„ì„ (Advanced Tech Analysis)
        **[ A. ìº”ë“¤ & ì°¨íŠ¸ íŒ¨í„´ (Pattern Recognition) ]**
        - ì¼ë´‰ (Daily) / [ ì‹ë³„ëœ íŒ¨í„´ëª… ] :
          (ì´í‰ì„ , ë°•ìŠ¤ê¶Œ, ê¹ƒë°œí˜•, ì‚¼ê°ìˆ˜ë ´, wì, í—¤ë“œì•¤ìˆ„ë” ë“± íŒ¨í„´ ë¶„ì„ ë° í•´ì„ ë‚´ìš© ì‘ì„±)
        - ì£¼ë´‰ (Weekly) / [ ì‹ë³„ëœ íŒ¨í„´ëª… ] :
          (ì´í‰ì„ , ì¤‘ê¸°ì ì¸ ì¶”ì„¸ì™€ ìº”ë“¤ í˜•íƒœ ë¶„ì„ ë‚´ìš© ì‘ì„±)
        **[ B. ì‹¬ì¸µ ë¶„ì„ (Elliott Wave & Fibonacci) ]**
        - ì—˜ë¦¬ì—‡ íŒŒë™ (Elliott Wave) :
        > í˜„ì¬ ìœ„ì¹˜ : (ìƒìŠ¹ 3íŒŒ / ì¡°ì • 4íŒŒ ë“± êµ¬ì²´ì  íŒŒë™ ë‹¨ê³„ ëª…ì‹œ, ê° íŒŒí˜• ë³„ ê¸°ê°„ ë° ì£¼ê°€ ì‘ì„±)
        > íŠ¹ì§• : (í•´ë‹¹ íŒŒë™ì˜ ê¸°ìˆ ì  íŠ¹ì§•ê³¼ í–¥í›„ ì˜ˆì¸¡)
        - ì§€ì§€ì™€ ì €í•­ (Support & Resistance) :
        > ì €í•­ (Resistance) : 
            1ì°¨ $XX.XX (ëŒíŒŒí•´ì•¼ í•  ê°€ê²©) 
            2ì°¨ $XX.XX (1ì°¨ ì €í•­ ì´í›„ì˜ ì €í•­ì„ )
        > ì§€ì§€ (Support) :
            1ì°¨ (ë‹¨ê¸°) - $XX.XX (ì´í‰ì„  ë“± ê·¼ê±° í¬í•¨)
            2ì°¨ (ì¤‘ê¸°) - $XX.XX (ìµœí›„ ë°©ì–´ì„ )
        **[ C. ì¶”ì„¸ ë° ì§€í‘œ (Trend & Indicators) ]**
        - ì´ë™í‰ê· ì„  :
          (5, 20, 60, 120ì¼ì„  ë°°ì—´ ìƒíƒœ / ê³¨ë“ -ë°ë“œí¬ë¡œìŠ¤ / ì§€ì§€-ì €í•­ ì—­í•  ë¶„ì„)
        - ë³´ì¡°ì§€í‘œ :
        > RSI (14) : (ìˆ˜ì¹˜ ë° ê³¼ë§¤ìˆ˜/ê³¼ë§¤ë„ ì—¬ë¶€ í•´ì„)
        > Stochastic : (ì¶”ì„¸ ë°©í–¥ì„± í•´ì„)
        ### 4. âš”ï¸ ì „ë¬¸ê°€ í† ë¡  (Debate)
        **ğŸ—£ï¸ ì „ë¬¸ê°€ A (Chartist / íƒ€ì´ë°)**
        * **ë‹¨ê¸° ê´€ì :** (ì¼ë´‰ìƒ ê³¨ë“ í¬ë¡œìŠ¤, ìº”ë“¤ íŒ¨í„´ ë“± ë‹¹ì¥ì˜ ì§„ì… ê·¼ê±°)
        * **ê¸°íšŒ í¬ì°©:** (ì§€ê¸ˆ ì‚¬ë©´ ì–»ì„ ìˆ˜ ìˆëŠ” ë‹¨ê¸° ê¸°ëŒ€ ìˆ˜ìµ)
        * **ìš°ë ¤ ì‚¬í•­:** (ë‹¨ê¸° ê³¼ì—´ ì—¬ë¶€)
        **ğŸ§˜ ì „ë¬¸ê°€ B (Believer / ë§¤ì§‘ ì „ëµ)**
        * **ì¥ê¸° ì¶”ì„¸ ì§„ë‹¨:** (ì£¼ë´‰/ì›”ë´‰ìƒ ëŒ€ì„¸ ìƒìŠ¹ ì—¬ë¶€, 200ì¼ì„  ìœ„ì˜ ë†€ë¦¼ëª©ì¸ì§€ í™•ì¸)
        * **ğŸ’ ì¶”ë§¤(Accumulation) ë¶„ì„:**
        > **ì „ëµ:** (í˜„ì¬ëŠ” 'ë¶ˆíƒ€ê¸°' êµ¬ê°„ì¸ê°€, 'ì €ì  ë§¤ì§‘' êµ¬ê°„ì¸ê°€?)
        > **ì ì • ì¶”ë§¤ê°€:** (ì¡°ì •ì´ ì˜¨ë‹¤ë©´ $XX ë¶€ê·¼ì´ ê°•ë ¥í•œ ê¸°íšŒ)
        > **íƒ€ì´ë° ì‹ í˜¸:** (ì˜ˆ: ì£¼ë´‰ 20ì„  í„°ì¹˜ í›„ ì–‘ë´‰ ë°œìƒ ì‹œ, RSI 40 ì´í•˜ ë“±)
        * **ë¦¬ìŠ¤í¬:** (ì¶”ë§¤ë¥¼ ë©ˆì¶”ê³  ê´€ë§í•´ì•¼ í•  ìœ„í—˜ ì‹ í˜¸)
        ### 5. âš–ï¸ ì•™ìƒë¸” ì¢…í•© ë¶„ì„ (Synthesis)
        - **ì¶”ì„¸ íŒë‹¨:** (ì¥ê¸° ëŒ€ì„¸ ìƒìŠ¹ / ë‹¨ê¸° ì¡°ì • / í•˜ë½ ì „í™˜)
        - **ì£¼ìš” ì§€í‘œ ìƒíƒœ:**
          * ì¥ê¸° ì´í‰ì„ (200ì¼/60ì£¼): (ì§€ì§€ ì¤‘ / ì´íƒˆ / ì €í•­)
          * ëª¨ë©˜í…€(RSI): (ë§¤ìˆ˜ ê¸°íšŒ / ê³¼ì—´ / ì¤‘ë¦½)
        - **ì£¼ìš” ê°€ê²© ë¼ì¸:**
          * ğŸŸ¢ ë§¤ìˆ˜ ì ê¸°(Buy Zone): 1ì°¨ (ì¡°ì • ì‹œ ì§„ì…ê°€) / 2ì°¨ (ê°•ë ¥ ì§€ì§€ì„ )
          * ğŸ”´ ì €í•­ ë¼ì¸(Target): 1ì°¨ (ì „ê³ ì ) / 2ì°¨ (ì—­ì‚¬ì  ì‹ ê³ ê°€ ì˜ì—­)
        ### 6. ğŸ¦ ì˜ì¥ì˜ ìµœì¢… ì „ëµ (Investment Strategy)
        > [í•œì¤„ ê²°ë¡ ] : "í•µì‹¬ ê²°ë¡  (ì˜ˆ: ì¥ê¸° ìƒìŠ¹ ì¶”ì„¸ ìœ íš¨, ì¡°ì • ì‹œ ëª¨ì•„ê°ˆ êµ¬ê°„)"
        **[ ì‹œë‚˜ë¦¬ì˜¤ A : ì¥ê¸° ì ë¦½ (Accumulation) ]**
        - **ì „ëµ:** (ì˜ˆ: ë§¤ì›” ê¾¸ì¤€íˆ ëª¨ì•„ê°€ê±°ë‚˜, 20ì¼ì„  í„°ì¹˜ ì‹œë§ˆë‹¤ ì¶”ê°€ ë§¤ìˆ˜)
        - **ë§¤ì§‘ êµ¬ê°„:** $XX ~ $XX ì‚¬ì´ì—ì„œ ì ê·¹ ë§¤ìˆ˜ ê¶Œì¥
        - **ëª©í‘œ:** ë‹¨ê¸° ë“±ë½ ë¬´ì‹œí•˜ê³  ì¥ê¸° ì¶”ì„¸ ì¶”ì¢…
        **[ ì‹œë‚˜ë¦¬ì˜¤ B : ë¦¬ìŠ¤í¬ ê´€ë¦¬ (Protection) ]**
        - **ê²½ê³ :** ì¥ê¸° ì¶”ì„¸ì„ (60ì£¼ì„ /200ì¼ì„ ) ë¶•ê´´ ì‹œ
        - **í–‰ë™ ìš”ë ¹:** ë¹„ì¤‘ ì¶•ì†Œ ë˜ëŠ” ê´€ë§ (ë¬¼íƒ€ê¸° ê¸ˆì§€)
        - **ìµœí›„ ë°©ì–´ì„ (Stop Loss):** $XX.XX (ì¶”ì„¸ ë¶•ê´´ ì§€ì )
        **[ ğŸ§® ì†ìµë¹„ ê³„ì‚° (R/R Ratio) ]**
        - ì§„ì…ê°€($XX) ê¸°ì¤€ -> ê¸°ëŒ€ìµ($XX) vs ì†ì‹¤í­($XX)
        - ìµœì¢… ì†ìµë¹„ = 1 : X.X (ì§„ì… ì¶”ì²œ ì—¬ë¶€: ìŠ¹ì¸/ê±°ì ˆ)
        **[ ğŸ§® ê¸°ìˆ ì  ê°€ì¹˜ í‰ê°€ (Technical Value & R/R) ]**
        - ìƒìŠ¹ ë§ˆì§„(Upside): +XX.XX% (ëª©í‘œê°€ $XX.XX)
        - í•˜ë½ ë§ˆì§„(Downside): -XX.XX% (ì†ì ˆê°€ $XX.XX)
        - ê¸°ìˆ ì  ê°€ì¹˜ íŒë‹¨:** (ì˜ˆ: ì†ìµë¹„ 1:3ìœ¼ë¡œ ì§„ì… ë§¤ë ¥ë„ ë†’ìŒ / ë‚®ìŒ)
        **[ ğŸ§® íˆ¬ì ë§¤ë ¥ë„ (Investment Grade) ]**
        - ì¥ê¸° ë³´ìœ  ë§¤ë ¥ë„: (ë†’ìŒ/ì¤‘ë¦½/ë‚®ìŒ)
        - í˜„ì¬ ì§„ì… ë§¤ë ¥ë„: (ì ê·¹ ë§¤ìˆ˜/ë¶„í•  ë§¤ìˆ˜/ê´€ë§)
        - **ìµœì¢… íŒê²°:** (ì˜ì¥ì˜ ìµœì¢… ì¡°ì–¸ í•œë§ˆë””)
        """

    # Save prompt to a temporary file
    prompt_file = "temp_prompt.txt"
    with open(prompt_file, "w", encoding="utf-8") as f:
        f.write(prompt)

    print("\n[AI Investment Committee] Requesting analysis from gemini-cli...")
    try:
        # Call gemini-cli. Adjust the command depending on how gemini-cli is installed.
        # Assuming the command is `gemini` and it takes input from a file or stdin.
        # Here we pipe the file content to gemini
        import shlex
        escaped_prompt = shlex.quote(prompt)
        result = subprocess.run(f"export PATH=$PATH:/usr/sbin:/usr/bin:/sbin:/bin && gemini -p {escaped_prompt}", shell=True, capture_output=True, text=True)
        print("\n" + "="*50 + "\n")
        print(result.stdout)
        if result.stderr:
            print(f"Errors/Warnings:\n{result.stderr}")
        print("\n" + "="*50 + "\n")
    except Exception as e:
        print(f"Error calling gemini-cli: {e}")
    finally:
        # Clean up
        if os.path.exists(prompt_file):
            os.remove(prompt_file)

if __name__ == "__main__":
    main()